<project name="tieto" default="test" basedir=".">
    
    <property file="build.properties"/>
    <property environment="env"/>

    <path id="compile.classpath">
        <!-- jbilling libraries -->
        <fileset dir="${source.lib.dir}">
            <include name="*.jar"/>
        </fileset>

        <!-- grails libraries-->
        <fileset dir="${env.GRAILS_HOME}/lib/">
            <include name="*.jar"/>
        </fileset>

    </path>

    <path id="test.classpath">
        <pathelement location="${build.test.dir}"/>
        <pathelement location="${junit.dir}/junit.jar"/>

        <fileset dir="${easymock.dir}">
            <include name="*.jar"/>
        </fileset>

        <fileset dir="${drools.dir}">
            <include name="*.jar"/>
        </fileset>

        <!-- compiled jbilling classes -->
        <pathelement path="${build.classes.dir}"/>
    </path>

    <path id="spring.classpath">
        <pathelement location="${source.spring.descriptor.dir}"/>
    </path>

    <target name="test" depends="731,732">
    </target>

    <target name="build" depends="test.init">
	      <javac debug="on" destdir="${build.test.dir}"
              srcdir="${source.test.dir}/tieto/com/sapienter/jbilling/tieto">
            <classpath refid="test.classpath"/>
            <classpath refid="compile.classpath"/>
          </javac>

      <copy file="${source.spring.descriptor.dir}/jbilling-remote-beans.xml" 
            todir="${build.test.dir}"/>
    </target>

    <target name="test.init">
        <mkdir dir="${build.test.dir}"/>
    </target>

    <target name="731" depends="build">
        <junit printsummary="off" haltonfailure="true" fork="yes">
            <classpath refid="compile.classpath"/>
            <classpath refid="test.classpath"/>
            <formatter type="brief" usefile="false"/>
            <test name="com.sapienter.jbilling.tieto.CreateUser731"/>
        </junit>
    </target>

    <target name="732" depends="build">
        <junit printsummary="off" haltonfailure="true" fork="yes">
            <classpath refid="compile.classpath"/>
            <classpath refid="test.classpath"/>
            <formatter type="brief" usefile="false"/>
            <test name="com.sapienter.jbilling.tieto.BulkOrderExchange732"/>
        </junit>
    </target>


</project>
